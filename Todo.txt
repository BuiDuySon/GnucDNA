

Q2/NAT
QH2/FW
NAT detection, map of 10000 ips, once 10000 hit turn off detection
  add ips from udp send and sock connects
If PI/RELAY recved with UDP address of directly connected host (but not from directly connected host), disconnect youngest link

Gnutella-->Networks::IncomingSource-->IncomingResult
      G2-/                         \->AddHost

15 minute upgrade only if setconnected never called

Now	
	IPrefs::SetSpeedUp
	IPrefs::SetSpeedDown
	Set upload speed only if uploaded, take other speed stuff out
	
	check % full of g2 hash tables


Test
	*forwarding q2, blank q2s are being forwarded
	/TO packet
	table % full doesnt get too large
	sending/recving 64kb packets


G2 Questions
	closed clusters?
	Kill BE before it gets off ground, bad idea from G1 devs
	Screw bitprints
	Send null qka on qkr to child, signal remove from global cache
	Discussed - CLOSE packet
	Discussed - Connect to 1 hub - Purpose of connecting to more than one hub
	Fixing - network disable still being sent when header is same
	Fixing - Bug Sharaza sending QHT Patch to hubs with infinity set to 4, actually 4 bit tables!


G2 w/ DNA notes
	x-ultrapeer-needed not used


Rainy Day
	20 bit G1 QRP tables
	Unicode / UTF-8 support
	Advanced Query matching
	Advance error logging
	http templates as resources
	Winsock Error Code to String
	Accurate network stats
	Move filters out of dna
	> 2gb files
	PacketType/Sec using map<CString, int>
	HTTP request Host: without port, read location header for redirect

To Depreciate ( can be done outside dna )
	INetwork::GetNodePacketsPing
	INetwork::GetNodePacketsPong
	INetwork::GetNodePacketsQuery
	INetwork::GetNodePacketsQueryHit
	INetwork::GetNodePacketsPush
	INetwork::GetNodePacketsTotal
	INetwork::GetNodePacketsDown
	INetwork::GetNodePacketsUp
	INetwork::GetNodePacketsDropped
	
	ISearch::RefineSearch
	ISearch::SetFiltering
	ISearch::FilterSize
	ISearch::FilterSpeed
	
	IPrefs::GetHostServers
	IPrefs::SetHostServers
	IPrefs::GetScreenedNodes // use block list
	IPrefs::SetScreenedNodes



IChat
	CreateRoom(name) RoomID 
	CloseRoom(RoomID)
	GetRoomIDs() RoomIDs

	SearchRooms(filter) SearchID 
	OnSearchResult(ResultID)
	GetRoomName(ResultID) String
	GetRoomSize(ResultID) String 
	JoinRoom(ResultID) RoomID

	OnRoomEvent(RoomID, Event, Data)
	SendRoomMessage(RoomID, UserID, Message)
	OnRecvRoomMessage(RoomID, UserID, Message)
	GetRoomUserIDs() UserIDs

	SendDirectMessage(IP:Port, Message)
	OnRecvDirectMessage(IP:Port, Message)



	
	



